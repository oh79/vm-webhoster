# ì›¹ í˜¸ìŠ¤íŒ… ì„œë¹„ìŠ¤ í”„ë¡ì‹œ ì„¤ì •
server {
    listen 8080 default_server;
    server_name _;
    
    # ë©”ì¸ í˜ì´ì§€
    location = / {
        return 200 '
        <!DOCTYPE html>
        <html>
        <head>
            <title>ì›¹ í˜¸ìŠ¤íŒ… ì„œë¹„ìŠ¤</title>
            <style>
                body { 
                    font-family: Arial, sans-serif; 
                    text-align: center; 
                    padding: 50px;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    color: white;
                }
                .container { 
                    background: rgba(255,255,255,0.1); 
                    padding: 30px; 
                    border-radius: 10px; 
                    display: inline-block;
                }
                .user-list {
                    text-align: left;
                    margin: 20px 0;
                }
            </style>
        </head>
        <body>
            <div class="container">
                <h1>ğŸš€ ì›¹ í˜¸ìŠ¤íŒ… ì„œë¹„ìŠ¤</h1>
                <p>ì‚¬ìš©ìë³„ ì ‘ì† ë°©ë²•:</p>
                <div class="user-list">
                    <p>â€¢ /7 - ì‚¬ìš©ì ID 7ì˜ ì›¹í˜¸ìŠ¤íŒ…</p>
                    <p>â€¢ /8 - ì‚¬ìš©ì ID 8ì˜ ì›¹í˜¸ìŠ¤íŒ…</p>
                    <p>â€¢ ì§ì ‘ ì ‘ì†: :8XXX í¬íŠ¸</p>
                </div>
                <p><strong>ì ‘ì† URL: http://192.168.122.115:8080/</strong></p>
            </div>
        </body>
        </html>';
        add_header Content-Type text/html;
    }
    
    # ì‚¬ìš©ì 7ë²ˆ í”„ë¡ì‹œ (ì˜ˆì‹œ)
    location /7 {
        rewrite ^/7(/.*)$ $1 break;
        rewrite ^/7$ / break;
        proxy_pass http://127.0.0.1:8007;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    # ì‚¬ìš©ì 8ë²ˆ í”„ë¡ì‹œ (ì˜ˆì‹œ)  
    location /8 {
        rewrite ^/8(/.*)$ $1 break;
        rewrite ^/8$ / break;
        proxy_pass http://127.0.0.1:8008;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    # ë™ì  ì‚¬ìš©ì í”„ë¡ì‹œ (ë²”ìœ„: 1-50)
    location ~ ^/([1-9]|[1-4][0-9]|50)$ {
        set $user_id $1;
        rewrite ^/([1-9]|[1-4][0-9]|50)$ / break;
        proxy_pass http://127.0.0.1:80$user_id;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
    
    location ~ ^/([1-9]|[1-4][0-9]|50)/ {
        set $user_id $1;
        rewrite ^/([1-9]|[1-4][0-9]|50)/(.*) /$2 break;
        proxy_pass http://127.0.0.1:80$user_id;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
